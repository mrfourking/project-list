(this["webpackJsonpproject-list"]=this["webpackJsonpproject-list"]||[]).push([[0],{15:function(t,e,s){},16:function(t,e,s){"use strict";s.r(e);var r=s(1),i=s.n(r),c=s(9),a=s.n(c),n=s(3),o=s(4),p=s(2),l=s(6),j=s(5),d=s(0),u=function(t){Object(l.a)(s,t);var e=Object(j.a)(s);function s(){return Object(n.a)(this,s),e.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var t=this.props,e=t.onClick,s=t.className,r=t.dataType,i=t.children;return Object(d.jsx)("button",{onClick:e,className:"button "+s,type:"button","data-type":r,children:i})}}]),s}(i.a.Component),h=s(7),b=s.p+"static/media/edit.1610f3fa.svg",k=s.p+"static/media/delete.e4efcb06.svg",f=s.p+"static/media/x-mark.ae506d6c.svg",v=s.p+"static/media/save.23c9fb9b.svg",O=function(t){Object(l.a)(s,t);var e=Object(j.a)(s);function s(t){var r;return Object(n.a)(this,s),(r=e.call(this,t)).state={currentProject:null,editable:!1,item:null,projects:null},r.EditableSpan=i.a.createRef(),r.onCLickEditField=r.onCLickEditField.bind(Object(p.a)(r)),r.onClickDelete=r.onClickDelete.bind(Object(p.a)(r)),r.onClickSave=r.onClickSave.bind(Object(p.a)(r)),r.onClickCancel=r.onClickCancel.bind(Object(p.a)(r)),r.onClickSaveTask=r.onClickSaveTask.bind(Object(p.a)(r)),r}return Object(o.a)(s,[{key:"onCLickShowTasks",value:function(t){var e=this;if(!isNaN(this.props.item.id)){var s=this.props.projects.filter((function(e){return e.id===t}));this.setState({currentProject:s[0]},(function(){e.props.updateCurrentProject(e.state.currentProject)}))}}},{key:"onClickDelete",value:function(){var t=this,e=function(e){return e.id!==t.props.item.id};if(isNaN(this.props.item.id)){var s=this.props.currentProject.tasks.filter(e),r=Object.assign({},this.props.currentProject);r.tasks=s,this.setState({currentProject:r},(function(){t.props.updateCurrentProject(t.state.currentProject)}));var i=this.props.projects.findIndex((function(t){return t.id===r.id})),c=this.props.projects;c.splice(i,1,r),this.props.updateProjects(c)}else{var a=this.props.projects.filter(e);this.props.currentProject&&this.props.item.id===this.props.currentProject.id&&this.setState({currentProject:null},(function(){t.props.updateCurrentProject(t.state.currentProject)})),this.setState({projects:a},(function(){t.props.updateProjects(a)}))}}},{key:"onClickCancel",value:function(){this.setState({editable:!1}),this.EditableSpan.current.textContent=this.props.item.title}},{key:"onCLickEditField",value:function(){var t=this;this.setState({editable:!0},(function(){t.EditableSpan.current.focus()}))}},{key:"onClickSave",value:function(){var t=this;this.setState({editable:!1});var e={title:this.EditableSpan.current.textContent};this.setState({item:Object(h.a)(Object(h.a)({},this.props.item),e)},(function(){var e=t.props.projects.findIndex((function(e){return e.id===t.state.item.id})),s=t.props.projects;s.splice(e,1,t.state.item),t.props.updateProjects(s),t.props.currentProject&&t.props.currentProject.id===t.state.item.id&&t.props.updateCurrentProject(t.state.item)}))}},{key:"onClickSaveTask",value:function(){var t=this;this.setState({editable:!1});var e={title:this.EditableSpan.current.textContent};this.setState({item:Object(h.a)(Object(h.a)({},this.props.item),e)},(function(){var e=t.props.currentProject.tasks.findIndex((function(e){return e.id===t.state.item.id})),s=t.props.currentProject.tasks;s.splice(e,1,t.state.item);var r=t.props.currentProject;r.tasks=s,console.log(r),t.props.updateCurrentProject(r);var i=t.props.projects.findIndex((function(e){return e.id===t.props.currentProject.id})),c=t.props.projects;c.splice(i,1,r),t.props.updateProjects(c)}))}},{key:"render",value:function(){var t=this,e=this.props.item;return Object(d.jsxs)("div",{className:"editable-field",children:[this.props.isTask?Object(d.jsx)("span",{contentEditable:this.state.editable,className:"editable-field__name editable-field__name--no-pointer",suppressContentEditableWarning:!0,ref:this.EditableSpan,children:e.title}):Object(d.jsx)("span",{contentEditable:this.state.editable,className:"editable-field__name",suppressContentEditableWarning:!0,onClick:function(){return t.onCLickShowTasks(e.id)},ref:this.EditableSpan,children:e.title}),this.state.editable?Object(d.jsxs)(d.Fragment,{children:[this.props.isTask?Object(d.jsx)(u,{onClick:this.onClickSaveTask,editable:this.state.editable,children:Object(d.jsx)("img",{src:v,width:"20",height:"20"})}):Object(d.jsx)(u,{onClick:this.onClickSave,editable:this.state.editable,children:Object(d.jsx)("img",{src:v,width:"20",height:"20"})}),Object(d.jsx)(u,{onClick:this.onClickCancel,children:Object(d.jsx)("img",{src:f,width:"20",height:"20"})})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(u,{onClick:this.onCLickEditField,editable:this.state.editable,children:Object(d.jsx)("img",{src:b,width:"20",height:"20"})}),Object(d.jsx)(u,{onClick:this.onClickDelete,children:Object(d.jsx)("img",{src:k,width:"20",height:"20"})})]})]},e.id)}}]),s}(i.a.Component),m=s.p+"static/media/plus.89fe7bf6.svg",C=function(t){Object(l.a)(s,t);var e=Object(j.a)(s);function s(){var t;return Object(n.a)(this,s),(t=e.call(this)).addTask=t.addTask.bind(Object(p.a)(t)),t}return Object(o.a)(s,[{key:"addTask",value:function(){var t=this,e=Object.assign({},this.props.list.tasks[0]),s=0;this.props.list.tasks.length>0&&this.props.list.tasks.forEach((function(t){Number(t.id.split("t").pop())>s&&(s=Number(t.id.split("t").pop()))})),e.id="t"+(s+1),e.title="\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430";var r=this.props.list.tasks;r.push(e),console.log(r);var i=this.props.list;i.tasks=r,console.log(i),this.props.updateCurrentProject(i);var c=this.props.projects.findIndex((function(e){return e.id===t.props.list.id})),a=this.props.projects;a.splice(c,1,i),this.props.updateProjects(a)}},{key:"render",value:function(){var t=this,e=this.props,s=e.list,r=e.projects;return Object(d.jsxs)("div",{className:"task-list",children:[Object(d.jsxs)("h2",{className:"task-list__title",children:["\u0417\u0430\u0434\u0430\u0447\u0438 \u043f\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0443 - ",s.title]}),s.tasks.map((function(e){return Object(d.jsx)(O,{item:e,currentProject:s,projects:r,updateCurrentProject:t.props.updateCurrentProject,updateProjects:t.props.updateProjects,isTask:!0},e.id)})),Object(d.jsx)(u,{className:"task-list__add-btn",onClick:this.addTask,children:Object(d.jsx)("img",{src:m,width:"30",height:"30"})})]})}}]),s}(i.a.Component),P=function(t){Object(l.a)(s,t);var e=Object(j.a)(s);function s(){var t;return Object(n.a)(this,s),(t=e.call(this)).state={projects:null},t.addProject=t.addProject.bind(Object(p.a)(t)),t}return Object(o.a)(s,[{key:"addProject",value:function(){var t=this,e=Object.assign({},this.props.projects[0]),s=0;this.props.projects.forEach((function(t){t.id>s&&(s=t.id)})),e.id=s+1,e.title="\u041d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442",e.tasks=[];var r=this.props.projects;r.push(e),this.setState({projects:r},(function(){console.log(t.state.projects),t.props.updateProjects(t.state.projects)}))}},{key:"render",value:function(){var t=this,e=this.props,s=e.currentProject,r=e.projects;return Object(d.jsxs)("section",{className:"project-list",children:[Object(d.jsx)("div",{className:"project-list__header",children:Object(d.jsx)("h1",{className:"project-list__title",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"})}),Object(d.jsxs)("div",{className:"project-list__list",children:[Object(d.jsx)("div",{className:"project-list__wrapper",children:r.map((function(e){return Object(d.jsx)(O,{item:e,projects:r,currentProject:s,updateCurrentProject:t.props.updateCurrentProject,updateProjects:t.props.updateProjects},e.id)}))}),Object(d.jsx)(u,{className:"project-list__add-btn",onClick:this.addProject,children:Object(d.jsx)("img",{src:m,width:"30",height:"30"})})]}),Object(d.jsx)("div",{className:"project-list__tasks",children:s?Object(d.jsx)(C,{list:s,projects:r,updateCurrentProject:this.props.updateCurrentProject,updateProjects:this.props.updateProjects}):Object(d.jsx)("p",{children:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0438\u043b\u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442"})})]})}}]),s}(i.a.Component),g=(s(15),[{title:"project1",id:1,tasks:[{id:"t1",title:"task11"},{id:"t2",title:"task12"}]},{title:"project2",id:2,tasks:[{id:"t3",title:"task21"}]},{title:"project3",id:3,tasks:[]}]),x=function(t){Object(l.a)(s,t);var e=Object(j.a)(s);function s(t){var r;return Object(n.a)(this,s),(r=e.call(this,t))._isStorageSupport=!0,r.state={currentProject:null,projects:g},r.updateCurrentProject=r.updateCurrentProject.bind(Object(p.a)(r)),r.updateProjects=r.updateProjects.bind(Object(p.a)(r)),r}return Object(o.a)(s,[{key:"updateCurrentProject",value:function(t){this.setState({currentProject:t})}},{key:"updateProjects",value:function(t){var e=this;this.setState({projects:t},(function(){localStorage.setItem("projects",JSON.stringify(e.state.projects))}))}},{key:"componentDidMount",value:function(){var t;try{t=localStorage.getItem("projects"),t=JSON.parse(t)}catch(e){this._isStorageSupport=!1}this._isStorageSupport&&t&&this.setState({projects:t})}},{key:"render",value:function(){var t=this.state.projects;return Object(d.jsx)("div",{className:"page",children:Object(d.jsx)(P,{projects:t,currentProject:this.state.currentProject,updateCurrentProject:this.updateCurrentProject,updateProjects:this.updateProjects})})}}]),s}(i.a.Component),S=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,17)).then((function(e){var s=e.getCLS,r=e.getFID,i=e.getFCP,c=e.getLCP,a=e.getTTFB;s(t),r(t),i(t),c(t),a(t)}))};a.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(x,{})}),document.getElementById("root")),S()}},[[16,1,2]]]);
//# sourceMappingURL=main.06b929f9.chunk.js.map